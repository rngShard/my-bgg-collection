<mat-drawer-container>
  <mat-drawer #leftDrawer class="sidenav" mode="over">
    <p> This is a sidenav </p>
  </mat-drawer>
  
  <button class="miniFAB upperLeftFABButton" mat-mini-fab color="primary" matTooltip="Previously Owned" (click)="leftDrawer.toggle()">
    <mat-icon>inventory</mat-icon>
  </button>

  <mat-tab-group mat-align-tabs="center" selectedIndex="1">
    <mat-tab label="Archive">
      <app-archive-table [games]="fortrade"></app-archive-table>
    </mat-tab>
    <mat-tab label="Collection">
      <ng-template matTabContent>
        
        <form class="filter-flex-container" [formGroup]="formControl">
          <mat-form-field appearance="fill">
            <mat-label> Filter by name </mat-label>
            <input matInput formControlName="name">
          </mat-form-field>
          
          <mat-form-field appearance="fill">
            <mat-label> Filter by num. players </mat-label>
            <input matInput formControlName="numPlayers" type="number">
          </mat-form-field>
          
          <mat-form-field appearance="fill">
            <mat-label>Filter by weight</mat-label>
            <mat-select matNativeControl formControlName="weight">
              <mat-option value="1.5"> Light </mat-option>
              <mat-option value="2.5"> Medium </mat-option>
              <mat-option value="3.5"> Heavy </mat-option>
              <mat-option value="4.5"> Extreme </mat-option>
            </mat-select>
          </mat-form-field>
        </form>

        <div class="mat-elevation-z8">
          <table mat-table [dataSource]="dataSource" multiTemplateDataRows matSort>
            
            <ng-container matColumnDef="thumbnail">
              <th mat-header-cell *matHeaderCellDef>
                
                <mat-form-field class="thumbnail">
                  <mat-label> Columns to display </mat-label>
                  <mat-select [(value)]="columnsToDisplay" multiple>
                    <mat-option value="thumbnail" disabled> Thumbnail </mat-option>
                    <mat-option value="name" disabled> Name </mat-option>
                    <mat-option *ngFor="let colItem of availableColumns" [value]="colItem.colName"> {{ colItem.displayName }} </mat-option>
                  </mat-select>
                </mat-form-field>

              </th>
              <td class="thumbnail" mat-cell *matCellDef="let row">
                <img [src]="row.thumbnail" />
              </td>
            </ng-container>
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Name (Year) </th>
              <td mat-cell *matCellDef="let row">
                {{row.name}}
                <br>
                ({{row.yearPublished}})
              </td>
            </ng-container>
            <ng-container matColumnDef="yearPublished">
              <th class="attrs" mat-header-cell *matHeaderCellDef mat-sort-header> Published </th>
              <td class="attrs" mat-cell *matCellDef="let row"> {{row.yearPublished}} </td>
            </ng-container>
            <ng-container matColumnDef="numPlayersRecommended">
              <th class="attrs" mat-header-cell *matHeaderCellDef mat-sort-header> Num. Players </th>
              <td class="attrs" mat-cell *matCellDef="let row"> {{row.numPlayersRecommended | json}} </td>
            </ng-container>
            <ng-container matColumnDef="playingTime">
              <th class="attrs" mat-header-cell *matHeaderCellDef mat-sort-header> Time </th>
              <td class="attrs" mat-cell *matCellDef="let row"> {{row.playingTime}} min </td>
            </ng-container>
            <ng-container matColumnDef="playerAge">
              <th class="attrs" mat-header-cell *matHeaderCellDef mat-sort-header> Age </th>
              <td class="attrs" mat-cell *matCellDef="let row"> {{row.playerAge}}+ </td>
            </ng-container>
            <ng-container matColumnDef="ratingAverage">
              <th class="attrs" mat-header-cell *matHeaderCellDef mat-sort-header> Rating </th>
              <td class="attrs" mat-cell *matCellDef="let row"> {{row.ratingAverage}} </td>
            </ng-container>
            <ng-container matColumnDef="weightAverage">
              <th class="attrs" mat-header-cell *matHeaderCellDef mat-sort-header> Weight </th>
              <td class="attrs" mat-cell *matCellDef="let row"> {{row.weightAverage}} </td>      
            </ng-container>
            <ng-container matColumnDef="rank">
              <th class="attrs" mat-header-cell *matHeaderCellDef mat-sort-header> Rank </th>
              <td class="attrs" mat-cell *matCellDef="let row"> {{row.rank}} </td>
            </ng-container>
            <ng-container matColumnDef="numPlays">
              <th class="attrs" mat-header-cell *matHeaderCellDef mat-sort-header> Played </th>
              <td class="attrs" mat-cell *matCellDef="let row"> {{row.numPlays}} </td>
            </ng-container>

            <ng-container matColumnDef="expandedDetail">
              <td mat-cell *matCellDef="let row" [attr.colspan]="columnsToDisplay.length">
                <div class="row-expanded-details" [@detailExpand]="row == expandedRow ? 'expanded' : 'collapsed'">
                  
                  <app-boardgame-details-card [game]="row"></app-boardgame-details-card>

                </div>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
            <tr mat-row *matRowDef="let row; columns: columnsToDisplay;" class="entry-row"
                [class.example-expanded-row]="expandedRow === row"
                (click)="expandedRow = expandedRow === row ? null : row">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
            
          </table>
          
          <mat-paginator [pageSizeOptions]="[5, 10, 25, 50, 100]" [pageSize]="10"></mat-paginator>
        </div>

      </ng-template>
    </mat-tab>
    <mat-tab label="Preordered">
      <app-preordered-table [games]="preordered"></app-preordered-table>
    </mat-tab>
  </mat-tab-group>

  <button class="miniFAB upperRightFABButton" mat-mini-fab color="secondary" matTooltip="Wishlist" (click)="rightDrawer.toggle()">
    <mat-icon>shopping_cart</mat-icon>
  </button>

  <mat-drawer #rightDrawer class="sidenav" mode="over" position="end">
    <p> This is another sidenav </p>
  </mat-drawer>

</mat-drawer-container>